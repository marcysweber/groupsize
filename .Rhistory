#packages, functions, paths
################
library(nlrx)
library(sensitivity)
library(ggplot2)
library(future)
library(reshape2)
library(ggrepel)
library(data.table)
library(ggpubr)
library(dplyr)
#library(tidyverse)
musigma_processing <- function(data) {
return(dcast(data, metric + parameter ~ index))
}
multiplot <- function(..., plotlist = NULL, file, cols = 1, layout = NULL) {
require(grid)
plots <- c(list(...), plotlist)
numPlots = length(plots)
if (is.null(layout)) {
layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
ncol = cols, nrow = ceiling(numPlots/cols))
}
if (numPlots == 1) {
print(plots[[1]])
} else {
grid.newpage()
pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))
for (i in 1:numPlots) {
matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))
print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
layout.pos.col = matchidx$col))
}
}
}
netlogopath <- file.path("/Applications/NetLogo 7.0.0")
printwd()
?wd
??wd
getwd()
netlogopath <- file.path("/Users/me591666/Applications/NetLogo 7.0.0")
modelpath <- file.path("/Users/me591666/Documents/GitHub/groupsize/groupsizeforagingmodel.nlogox")
outpath <- file.path("/Users/me591666/Desktop")
#####
heatmaptheme <-
theme(
axis.title = element_text(size = 10, color = "black"),
axis.text = element_text(size = 8, color = "black"),
legend.text = element_text(size = 8),
legend.title = element_text(size = 10),
panel.grid = element_line(color = "black"),
panel.grid.major = element_line(color = "gray75"),
panel.grid.minor = element_line(color = "gray90"), panel.background = element_rect(fill = "white", color = "gray50"),)
h0metrics <- c(
"mean-group-size",
"var-group-size",
"percent-grouped",
"mean-distance-traveled",
"mean-percent-time-moving")
#constants for H0, group size chapter
#group recog turned ON
h0constants <- list("group-recog-module?" = "true",
"go-tests-on?" = "false",
"resource-tests-on?" = "false",
"move-tests-on?" = "false")
#parameters for H0, group size chapter
#all parameters from H0 of gregariousness will be included
h0vars <- list(
"abundance" = list(min = 200000, max = 1200000, qfun = "qunif"),
"clump-size" = list(min = 1, max = 500, qfun = "qunif"),
"energy-per-capita" = list(min = 4000, max = 9000, qfun = "qunif"),
"qual-mean" = list(min = 25, max = 150, qfun = "qunif"),
"qual-sd" = list(min = 1, max = 20, qfun = "qunif"),
"extraction-rate-mean" = list(min = 2, max = 7, qfun = "qunif"),
"extraction-rate-sd" = list(min = 1, max = 3, qfun = "qunif"),
"tgt-dist" = list(min = 5, max = 40, qfun = "qunif"),
"tgt-neighbor" = list(min = 0, max = 11, qfun = "qunif"),
"other-primate-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"resource-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"regrowth-rate" = list(min = 0.5, max = 1.0, qfun = "qunif"),
"patch-regrowth-interval" = list(min = 500, max = 3000, qfun = "qunif"),
"movement-noise" = list(min = 10, max = 45, qfun = "qunif"),
"max-move" = list(min = 10, max = 50, qfun = "qunif"))
#set up NLRX experiment for H0 (pattern-matching and group verification)
nlh0 <- nl(nlversion = "7.0.0",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
netlogopath <- file.path("/Users/me591666/Applications/NetLogo 7.0.2")
modelpath <- file.path("/Users/me591666/Documents/GitHub/groupsize/groupsizeforagingmodel.nlogox")
outpath <- file.path("/Users/me591666/Desktop")
#####
h0metrics <- c(
"mean-group-size",
"var-group-size",
"percent-grouped",
"mean-distance-traveled",
"mean-percent-time-moving")
#constants for H0, group size chapter
#group recog turned ON
h0constants <- list("group-recog-module?" = "true",
"go-tests-on?" = "false",
"resource-tests-on?" = "false",
"move-tests-on?" = "false")
#parameters for H0, group size chapter
#all parameters from H0 of gregariousness will be included
h0vars <- list(
"abundance" = list(min = 200000, max = 1200000, qfun = "qunif"),
"clump-size" = list(min = 1, max = 500, qfun = "qunif"),
"energy-per-capita" = list(min = 4000, max = 9000, qfun = "qunif"),
"qual-mean" = list(min = 25, max = 150, qfun = "qunif"),
"qual-sd" = list(min = 1, max = 20, qfun = "qunif"),
"extraction-rate-mean" = list(min = 2, max = 7, qfun = "qunif"),
"extraction-rate-sd" = list(min = 1, max = 3, qfun = "qunif"),
"tgt-dist" = list(min = 5, max = 40, qfun = "qunif"),
"tgt-neighbor" = list(min = 0, max = 11, qfun = "qunif"),
"other-primate-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"resource-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"regrowth-rate" = list(min = 0.5, max = 1.0, qfun = "qunif"),
"patch-regrowth-interval" = list(min = 500, max = 3000, qfun = "qunif"),
"movement-noise" = list(min = 10, max = 45, qfun = "qunif"),
"max-move" = list(min = 10, max = 50, qfun = "qunif"))
#set up NLRX experiment for H0 (pattern-matching and group verification)
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
netlogopath <- file.path("/Applications/NetLogo 7.0.2")
modelpath <- file.path("/Users/me591666/Documents/GitHub/groupsize/groupsizeforagingmodel.nlogox")
outpath <- file.path("/Users/me591666/Desktop")
#####
group size chapter
h0metrics <- c(
"mean-group-size",
"var-group-size",
"percent-grouped",
"mean-distance-traveled",
"mean-percent-time-moving")
#constants for H0, group size chapter
#group recog turned ON
h0constants <- list("group-recog-module?" = "true",
"go-tests-on?" = "false",
"resource-tests-on?" = "false",
"move-tests-on?" = "false")
#parameters for H0, group size chapter
#all parameters from H0 of gregariousness will be included
h0vars <- list(
"abundance" = list(min = 200000, max = 1200000, qfun = "qunif"),
"clump-size" = list(min = 1, max = 500, qfun = "qunif"),
"energy-per-capita" = list(min = 4000, max = 9000, qfun = "qunif"),
"qual-mean" = list(min = 25, max = 150, qfun = "qunif"),
"qual-sd" = list(min = 1, max = 20, qfun = "qunif"),
"extraction-rate-mean" = list(min = 2, max = 7, qfun = "qunif"),
"extraction-rate-sd" = list(min = 1, max = 3, qfun = "qunif"),
"tgt-dist" = list(min = 5, max = 40, qfun = "qunif"),
"tgt-neighbor" = list(min = 0, max = 11, qfun = "qunif"),
"other-primate-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"resource-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"regrowth-rate" = list(min = 0.5, max = 1.0, qfun = "qunif"),
"patch-regrowth-interval" = list(min = 500, max = 3000, qfun = "qunif"),
"movement-noise" = list(min = 10, max = 45, qfun = "qunif"),
"max-move" = list(min = 10, max = 50, qfun = "qunif"))
#set up NLRX experiment for H0 (pattern-matching and group verification)
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
h0metrics <- c(
"mean-group-size",
"var-group-size",
"percent-grouped",
"mean-distance-traveled",
"mean-percent-time-moving")
#constants for H0, group size chapter
#group recog turned ON
h0constants <- list("group-recog-module?" = "true",
"go-tests-on?" = "false",
"resource-tests-on?" = "false",
"move-tests-on?" = "false")
#parameters for H0, group size chapter
#all parameters from H0 of gregariousness will be included
h0vars <- list(
"abundance" = list(min = 200000, max = 1200000, qfun = "qunif"),
"clump-size" = list(min = 1, max = 500, qfun = "qunif"),
"energy-per-capita" = list(min = 4000, max = 9000, qfun = "qunif"),
"qual-mean" = list(min = 25, max = 150, qfun = "qunif"),
"qual-sd" = list(min = 1, max = 20, qfun = "qunif"),
"extraction-rate-mean" = list(min = 2, max = 7, qfun = "qunif"),
"extraction-rate-sd" = list(min = 1, max = 3, qfun = "qunif"),
"tgt-dist" = list(min = 5, max = 40, qfun = "qunif"),
"tgt-neighbor" = list(min = 0, max = 11, qfun = "qunif"),
"other-primate-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"resource-detection-radius" = list(min = 50, max = 100, qfun = "qunif"),
"regrowth-rate" = list(min = 0.5, max = 1.0, qfun = "qunif"),
"patch-regrowth-interval" = list(min = 500, max = 3000, qfun = "qunif"),
"movement-noise" = list(min = 10, max = 45, qfun = "qunif"),
"max-move" = list(min = 10, max = 50, qfun = "qunif"))
#set up NLRX experiment for H0 (pattern-matching and group verification)
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
install.packages("rJavaEnv")
library(rJavaEnv)
java_check_version_rjava()
install.packages("rJava")
library(rJava)
java_check_version_rjava()
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
?java_home
??java_home
nlh0 <- nl(nlversion = "7.0.2",
nlpath = netlogopath,
modelpath = modelpath,
jvmmem = 12000)
nlh0@experiment <- experiment(expname = "groupsizeh0MEE",
outpath = outpath,
repetition = 1,
tickmetrics = "false",
idsetup = "setup",
idgo = "go",
runtime = 4300,
#stopcond = "(ticks > 5000)",
metrics = h0metrics,
variables = h0vars,
constants = h0constants)
nlh0@simdesign <- simdesign_morris(nl = nlh0,
morristype = "oat",
morrislevels = 12,
morrisr = 72,
morrisgridjump = 6,
nseeds = 1)
#run NLRX experiment for H0
progressr::handlers("progress")
plan(multisession)
resultsGSh0 <- progressr::with_progress(run_nl_all(nlh0))
